---
layout: default
---

<nav id="navbar">
    <header>CS4SG Organization</header>
    <ul>
      <li><a class="nav-link" href="./#Introduction">Introduction</a></li>
      <li><a class="nav-link" href="./#add_info">Adding information to the website</a></li>
      <li><a class="nav-link" href="./#forms">Forms</a></li>
      <li><a class="nav-link" href="/resources.html" target="_blank">Resources</a></li>
      <li><a class="nav-link" href="https://docs.google.com/document/d/1_oJGjgSufz_YQ7Z0g6GItEA46z9770ZcZO6dj3ZuDnA/edit?usp=sharing" target="_blank">Website Architecture</a></li>
      <li><a class="nav-link" href="./create_form.html">How to create a Form?</a></li>
      <li><a class="nav-link" href="./create_section">How to create a new section in the website?</a></li>
      <li><a class="nav-link" href="./#help">Help&nbsp;<i class="fa fa-question-circle"></i></a></li>
    </ul>
</nav>

<main id="main-doc">
<section class="main-section" id="creating_form">
    <header>How to create a Form?</header>
    <article>
      <p>
        To create a form, please download the following template and follow the directions given below.<br/>
        <a href="form_template.html" download>Download Form Template&nbsp;<i class="fa fa-download" aria-hidden="true"></i></a>
        <ul>
          <li>
            <h3>Entering Basic information about the form.</h3>
            <p>The top of form template contains the 3 basic information of the website.
              <code>
  ---
  <b>layout:</b>&nbsp;form&nbsp;<font style="color:white">&#8592;&nbsp;The layout type is form</font>
  <b>title:</b>&nbsp;<font style="color:white">&#8592;&nbsp;Enter the title of the form</font>
  <b>upload:</b>&nbsp;<font style="color:white">&#8592;&nbsp;Enter the url of the destination folder where completed form should be uploaded</font>
  <b>destination_layout: </b>&nbsp;<font style="color:white">&#8592;&nbsp;Enter the layout type for the generated file from this form.</font>
  ---
              </code>
            </p>
          </li>
          <li>
            <h3>Writing the HTML</h3>
            <p>
              <ol>
                <li>
                  <h4>Sorround your whole HTML code between &#60;div id="after_submission"&#62;&nbsp;...&nbsp;&#60;/div&#62;</h4>
              <code>
  &#60;div id="after_submission"&#62;
  .
  .
  .
  &#60;/div&#62;
              </code>
              </li>
              
              <li>
                <h4>HTML code to add a text / number / date / time / datetime-local / file etc. input</h4>
                <code>
  &#60;div&#62;
    &#60;input type="<font style="color:white">text / number / date / time / datetime-local / file etc.</font>" 
    id="<font style="color:white">The ID you want to provide</font>" 
    placeholder="<font style="color:white">The placeholder text</font>" 
    required= <font style="color:white">Use this attribute only if you want the field to be required. Type <b><i>"required"</i></b></font>
    /&#62;
  &#60;/div&#62;
                </code><br/>
                <b>Output:</b><br/><br/>
                <input type="text" id="sample" placeholder="some sample placeholder" required="required"/>
              </li>

              <li>
                <h4>HTML code to add a Select input</h4>
                <code>
  &#60;div&#62;
    &#60;select id="<font style="color:white">The ID you want to provide</font>"&#62;
      &#60;option selected value=""&#62;-- Select --&#60;/option&#62;
      &#60;option value="Option 1"&#62;Option 1&#60;/option&#62;
      &#60;option value="Option 2"&#62;Option 2&#60;/option&#62;
    &#60;/select&#62;
  &#60;/div&#62;
                </code><br/>
                <b>Output:</b><br/>
                <div>
                  <select id="sample_category">
                      <option selected value="">-- Select --</option>
                      <option value="Option 1">Option 1</option>
                      <option value="Option 2">Option 2</option>
                  </select>
              </div>
              </li>
              <li>
                <h4>HTML code to add a Rich Text Edtor</h4>
                <p>The JavaScript part of Rich Text Editor can be found <a href="#RTE">here</a>.</p>
                <code>
  &#60;div&#62;
    &#60;div style="padding: 12px; font: 17px Calibri; 
    width: 100%; border: 1px solid #ccc; border-radius: 4px;"&#62;  
      &#60;h5&#62;Description&#60;/h5&#62;
        &#60;div&#62;&#60;iframe src="../edit.html" style="border:0px; width:100%; min-height:50vh;"&#62;&#60;/iframe&#62;&#60;/div&#62;
    &#60;/div&#62;
  &#60;/div&#62;
                </code>
                <center><a href="./assets/images/Rich_Text.jpg" target="_blank"><img src="./assets/images/Rich_Text.jpg" alt="Rich text Editor" class="help_img"></a></center>
              </li>
              </ol>
            </p>
          </li>
          <li>
            <h3>Writing the JavaScript</h3>
            <p>here are some of the javascript functions that are used frequently in the forms. 
              Please tweak some of the information to make them functional in the form.</p>
              <p><font style="color:red">*</font>All JavaScript code should come between the <b><i>&#60;script&#62;&nbsp;...&nbsp;&#60;/script&#62;</i></b> Tags.</p>
                <ol>
                  <li>
                    <h4>The Window Reload Function</h4>
                    <p>Particularly used when you have <a href="#tags">tags</a> to display in your form.<br/>
                    <b>Use:&nbsp;</b>Reloads the page.
                    </p>
                    <code>
  window.onload = function() {
    if(!window.location.hash) {
        window.location = window.location + '#loaded';
        window.location.reload();
    }
  }
                    </code>
                  </li>

                  <li>
                    <h4>Adding new external people</h4>
                    <code>
  <font style="color:white">
  // First define a new List. 
  // If you have an existing list where you want to add new people, 
  //you do not need to define a new one.

  var sample_list = []

  </font>
  function add_new(id, list_name, ul_name){
    var n = document.getElementById(id).value
    if(n != ""){
      eval(String(list_name)+".push('"+n+"')");
        var node = document.createElement("li");
        node.onclick = function() {this.parentNode.removeChild(this);};
        var textnode = document.createTextNode(n);
        node.appendChild(textnode);
        document.getElementById(ul_name).appendChild(node);
      document.getElementById(id).value = "";
    }
    else{

    }
  }

  <font style="color:white">
  // Calling the function: The function can be called inside the HTML.</font>
  &#60;input type="text" 
  id="<font style="color:white">SampleId_text</font>" 
  placeholder="Enter a new Person" 
  style="width:50%"&#62;

  &#60;input type="button" 
  onclick="add_new('<font style="color:white">The ID of input text element (SampleId_text)</font>',
  '<font style="color:white">The name of the list variable defines in JavaScript between "..." (sample_list)</font>', 
  '<font style="color:white">The ID of UL element (id_ul)</font>');" 
  value="<font style="color:white"></font>" style="width:10%"&#62;
  
  &#60;ul id="<font style="color:white">id_ul</font>" 
  style="font-weight: normal; text-align: left; padding:10px;"&#62;
  &#60;LH&#62;&#60;b&#62;Added non-organization People:&#60;/b&#62;&#60;/LH&#62;&#60;/ul&#62;
                    </code>
                  </li>

                  <li>
                    <h4 id="tags">Adding Tags</h4>
                    <p>This is a 2-part functionality.
                      <ol type="I">
                        <li>Changes in the individual section of the <a href="\" target="_blank">CS4SG website</a></li>
                        <li>Fetching the data from the official website page into the form.</li>
                      </ol>
                    </p>
                    <center><a href="./assets/images/tags.jpg" target="_blank"><img src="./assets/images/tags.jpg" alt="Generate Tags" class="help_img"></a></center>
                    <b>Step-I. Changes in the individual section of the CS4SG Website</b>
                    <p>In order to fetch the data from the page, we need to get a string like "item #1,item #2,item #3,...". In order to do that,
                      we can loop through the data, and append whatever information we need, in the string.
                    </p>
                    <p>We can do that using Jekyll for loop.</p>
                    <code>
  <font style="color:white">// Assign a string to which data will be appended.</font>
  {&#37; assign title_string = ""	&#37;}

  <font style="color:white">// Loop through the data.</font>
  {&#37; for <font style="color:white">variable_name</font> in site.<font style="color:white">page_name</font> &#37;}
    {&#37; capture title_string &#37;}&#123;&#123; title_string | append: <font style="color:white">variable_name</font>.name &#125;&#125;{&#37; endcapture &#37;}
    {&#37; if forloop.last == false &#37;}
        {&#37; capture title_string &#37;}&#123;&#123; title_string | append: "," &#125;&#125;{&#37; endcapture &#37;}
    {&#37; endif &#37;}
    .
    .
    .
  {&#37; endfor &#37;}

  <font style="color:white">// Save all the data in a div.</font>
  &#60;div class="myData" data-x='&#123;&#123; title_string &#125;&#125;'&#62;&#60;/div&#62;
                    </code><br/>
                    <b>Step-II. Fetching the data from the official website page into the form.</b>
                    <p>We can do this using jQuery GET request</p>
                    <code>
  <font style="color:white">// Inside the <b><i>&#60;script&#62;&nbsp;...&nbsp;&#60;/script&#62;</i></b> Tags, add the following.</font>
  <font style="color:white">// getdata function returns the string of items seperated by ","</font>
  function getdata(file){
    $.get(file, function(result){
        var obj = $(result).find('script');
        var page1X = $(result).find('div.myData').data('x');
        if(page1X != null){
            sessionStorage.setItem(file, page1X);
        }
        else{
            window.location.reload();
        }
    });
    return(String(sessionStorage.getItem(file)));
  }

  <font style="color:white">// tagger function returns the List of all the items and also displays the tags on the form.</font>
  function tagger(t, inside, samp_func){
    var people_checked = []
    var people_arr = t.split(",")
    
    var i=0;
    function add(ids, parent){
      i++;
      var node = document.createElement('div');        
      node.innerHTML = '&#60;input type="checkbox" id="' + ids +
       '" onChange="'+samp_func+'(this)" name="check' + i + '">
      &#60;label for="' + ids + '">'+ ids +'&#60;/label>';
      document.getElementById(parent).appendChild(node);
    }

    for (e of people_arr) {
      add(e, inside)
    }

    function remove(array, element) {
      const index = array.indexOf(element);
      array.splice(index, 1);
    }

    window[samp_func] = function(item){
      if(people_checked.includes(item.id)){
        remove(people_checked,item)
      }
      else{
        people_checked.push(String(item.id))
      }
      console.log(people_checked)
    }
    return people_checked
  }

  <font style="color:white">// List of all the items fetched and display on the form.</font>
  var variable_name = tagger(
    getdata("/<font style="color:white">page_name</font>.html"), 
    '<font style="color:white">ID of div you want to show the tags inside (sample_tag)</font>', 
    "<font style="color:white">Unique variable name as String</font>"
  );

  <font style="color:white">// Displaying tags on the form (HTML).</font>
  &#60;div&#62;
  &#60;div 
  style="padding: 12px; font: 17px Calibri; width: 100%; border: 1px solid #ccc; border-radius: 4px;"&#62;

    &#60;center&#62;
      &#60;h5&#62;Choose Related Tag&#60;/h5&#62;
    &#60;/center&#62;
  &#60;div id="sample_tag" class="hiddenCB"&#62;&#60;/div&#62;
  &#60;/div&#62;&#60;/div&#62;
                    </code>
                  </li>
                  <li>
                    <h4>Converting inputs to Markdown</h4>
                    <p>The following function converts the user inputs to Markdown format and downloads it to the device.</p>
                    <code>
  let saveFile = () => {

    <font style="color:white">// Get the data from each element on the form.</font>
    const topic = document.getElementById('topic').value;

    <font style="color:white" id="RTE">// Get the data from the Rich Text Editor.</font>
    var msg = String(localStorage.getItem("saved_research_html"));
    
    <font style="color:white">// This variable stores all the data.</font>
    let data = 
        "---"+"\n"+
        "layout: {{ page.destination_layout }}"+"\n"+
        "title: "+topic+"\n"+<font style="color:white">
        .
        .
        .</font>
        "key: "+topic+"\n"+
        "---"+"\n\n"+
        +msg
    
    
    
    <font style="color:white">// Convert the text to BLOB.</font>
    const textToBLOB = new Blob([data], { type: 'text/plain' });
    const sFileName = topic+'.md';	   // The file to save the data.
    
    let newLink = document.createElement("a");
    newLink.download = sFileName;
    
    if (window.webkitURL != null) {
        newLink.href = window.webkitURL.createObjectURL(textToBLOB);
    }
    else {
        newLink.href = window.URL.createObjectURL(textToBLOB);
        newLink.style.display = "none";
        document.body.appendChild(newLink);
    }
    
    newLink.click(); 
  }
                    </code>
                    <p>Here are all the types of layouts:</p>
                    <ul>
                      {% for form in site.forms %}
                      <li>{{ form.destination_layout }}</li>
                      {% endfor %}
                    </ul>
                  </li>
                  <li>
                    <h4>Displaying steps after form submission</h4>
                    <p>To display the after form submission text, just copy and paste the following code.</p>
                    <code>
  function after_submission(){
    document.getElementById("after_submission").innerHTML = "&#60;br&#62;&#60;br&#62;
    &#60;center&#62;&#60;table width='80%'&#62;&#60;h2&#62;
    Thank you for submitting your publication.&#60;/h2&#62;
    &#60;br&#62;&#60;br&#62;
     To add it to the CS4SG website, just upload the file to the destination folder.
      Here is the link for the folder
      &#60;br&#62;&#60;a href = '{{ page.upload }}' target='_blank'>{{ page.upload }}
      &#60;/a&#62;&#60;/table&#62;&#60;/center&#62;"
  }
                    </code>
                  </li>
                  <li>
                    <h4>Checking if the <b>Title</b> is unique</h4>
                    <p>The title of every Markdown file generated should be unique, otherwise it will cause 
                      problems and errors during display on the website. To resove this problem, here is a javascript function and corresponding implementation 
                      implementation in the HTML part that shows an <i>error</i> alert and clears the title field if it is unique.</p>
                    <p>If you would like to implement the feature in any other field, you can simply make some minor changes in the function and calling the function in the text field.</p>
                    <p>Here is the javascript code explaining the working of the function.</p>
                    <code>
  <font style="color:white">// <b>title_string</b> fetches all the page titles from the url provided as of comma-sepeated string.</font>
  let title_string = getdata("/<font style="color:white">Page url</font>");

  <font style="color:white">// <b>check_existence</b> function checks if the string entered by user 
  is already in the list of all the titles.</font>
  function check_existence(id){
    titles = title_string.split(",")
    if(titles.includes(document.getElementById(id).value)){
      alert("Title already exist! please choose another title.")
      document.getElementById(id).value = '';
    }
  }
                    </code>
                    <p>Now call the <b>check_existence</b> function in the HTML part. The parameter is the ID of input field.</p>
                    <code>
  &#60;div&#62;&#60;input type="text" id="topic" 
  placeholder="Enter Title" required="required" 
  <font style="color:white">onchange="check_existence('topic')"</font>/&#62;&#60;/div&#62;
                    </code>
                  </li>
                </ol>
          </li>
        </ul>
      </p>
    </article>
  </section>
</main>

<!-- Developer: Prakshal Jain || Contact: prakshal@buffalo.edu -->